{% extends 'base.html' %} {% load static %} {% block content %}
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 
	<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.0/dist/js.cookie.min.js"></script> 
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script> 
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"> 
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"> 
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		#response {
			background-color: #f8f9fa; /* Bootstrap의 light 그레이 배경색 */
			color: #495057; /* Bootstrap의 dark 그레이 텍스트 색상 */
			border-radius: .25rem; /* Bootstrap의 rounded 클래스와 같은 모서리 둥글기 */
			padding: 1rem; /* 내부 여백 */
		}
		/* 프롬프트와 응답 텍스트 스타일링 */
		#response p {
			font-size: 1rem; /* 텍스트 크기 */
			margin-bottom: .5rem; /* 단락 간 여백 */
		}
		.bi-person, .bi-robot {
			margin-right: .5rem; /* 아이콘과 텍스트 사이의 여백 */
		}
	</style>
	<script> 
		$(document).ready(function() { 
			$('form').on('submit', function(event) { 
				event.preventDefault(); 
				var csrftoken = Cookies.get('csrftoken'); 
				$.ajaxSetup({ 
					headers: { 'X-CSRFToken': csrftoken } 
				}); 
				var prompt = $('#prompt').val(); 
				var dateTime = new Date(); 
				var time = dateTime.toLocaleTimeString(); 
				$('#response').append('<p>('+ time + ') <i class="bi bi-person"></i>: ' + prompt + '</p>'); 
				$('#prompt').val(''); 
				$.ajax({ 
					url: '/chat/', 
					type: 'POST', 
					data: {prompt: prompt}, 
					dataType: 'json', 
					success: function(data) { 
						$('#response').append('<p>('+ time + ') <i class="bi bi-robot"></i>: ' + data.response + '</p>'); 
					} 
				}); 
			}); 
		}); 
	</script> 
	<div class="container p-3"> 
		<h3>ChatGPT Clone</h3> 
		<div class="mb-3"> 
			<form method="post"> 
				<!-- Django template tag for CSRF token -->
				<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
				<label for="prompt" class="form-label"><strong>Prompt:</strong></label> 
				<textarea class="form-control" id="prompt" name="prompt" rows="3"></textarea> 
				<br> 
				<button class="btn btn-primary" type="submit">Submit</button> 
			</form> 
		</div> 
		<br> 
		<div class="mb-3"> 
			<h6>Response:</h6> 
			<div class="container border overflow-auto h-50" id="response"></div> 
		</div> 
	</div> 

{% endblock %}