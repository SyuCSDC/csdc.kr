{% extends 'base.html' %} {% load static %} {% block content %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />

<script>
  document.getElementById("msg").innerHTML = `
    {% if notice %}
    공지사항
    {% else %}
    자유게시판
    {% endif %}`;
</script>
<script src="{% static 'js/tags-description.js' %}"></script>
<div class="container" style="padding: 60px">
  {% include 'desc.html' %}
  <div class="d-grid gap-2 d-md-flex justify-content-md-end">
    {% if notice %} {% if request.user.is_superuser %}
    <a href="{% url 'board:noticeBoard_create' %}" role="button" class="btn btn-primary">글 작성하기</a>
    {% endif %} {% else %}
    <a href="{% url 'board:freeBoard_create' %}" role="button" class="btn btn-primary">글 작성하기</a>
    {% endif %}
  </div>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">글 번호</th>
        <th scope="col">글 제목</th>
        <th scope="col">작성자</th>
        <th scope="col">학번</th>
        <th scope="col">관리</th>
      </tr>
    </thead>
    <tbody>
      {% for board in boards %}
      <tr onclick="location.href='./{{ board.pk }}'" style="cursor: pointer">
        <th scope="row">{{ forloop.revcounter }}</th>
        <td>{{ board.title }}</td>
        <td>{{ board.author.user.last_name }}{{ board.author.user.first_name }}</td>
        <td>{{ board.author.student_id }}</td>
        <td>
          {% if board.author.user == request.user %} {% if notice %}
          <a href="{% url 'board:noticeBoard_update' board_id=board.pk %}" style="margin-right: 5px">수정하기</a>
          <a href="{% url 'board:noticeBoard_delete' board_id=board.pk %}">글 삭제하기</a>
          {% else %}
          <a href="{% url 'board:freeBoard_update' board_id=board.pk %}" style="margin-right: 5px">수정하기</a>
          <a href="{% url 'board:freeBoard_delete' board_id=board.pk %}">글 삭제하기</a>
          {% endif %} {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
